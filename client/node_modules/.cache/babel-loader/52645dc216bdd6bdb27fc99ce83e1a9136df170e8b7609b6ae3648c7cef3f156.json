{"ast":null,"code":"import _toConsumableArray from\"D:/jisu/react-nodejs-chat/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/jisu/react-nodejs-chat/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import io from\"socket.io-client\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ENDPOINT=\"http://localhost:5000\";var socket=io(ENDPOINT);var Chat=function Chat(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),messages=_useState10[0],setMessages=_useState10[1];var location=useLocation();useEffect(function(){var _location$state=location.state,name=_location$state.name,room=_location$state.room;setRoom(room);setName(name);socket.emit(\"join\",{name:name,room:room});},[]);useEffect(function(){socket.on(\"message\",function(message){setMessages(function(prev){return[].concat(_toConsumableArray(prev),[message]);});});socket.on(\"roomData\",function(_ref){var users=_ref.users;setUsers(users);});},[]);var sendMessage=function sendMessage(){if(message){socket.emit(\"sendMessage\",message,function(){return setMessage(\"\");});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC774\\uB984: \",name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uCC44\\uD305\\uBC29: \",room]}),/*#__PURE__*/_jsx(\"ul\",{children:users.map(function(user,index){return/*#__PURE__*/_jsx(\"li\",{children:user.name},index);})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:messages.map(function(message,index){return/*#__PURE__*/_jsx(\"li\",{children:message},index);})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onClick:function onClick(e){return setMessage(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:sendMessage,children:\"\\uC804\\uC1A1\"})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useLocation","io","ENDPOINT","socket","Chat","name","setName","room","setRoom","users","setUsers","message","setMessage","messages","setMessages","location","state","emit","on","prev","sendMessage","map","user","index","e","target","value"],"sources":["D:/jisu/react-nodejs-chat/frontend/src/page/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst ENDPOINT = \"http://localhost:5000\";\r\n\r\nconst socket = io(ENDPOINT);\r\n\r\nconst Chat = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [room, setRoom] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const { name, room } = location.state;\r\n\r\n    setRoom(room);\r\n    setName(name);\r\n\r\n    socket.emit(\"join\", { name, room });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"message\", (message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    });\r\n\r\n    socket.on(\"roomData\", ({ users }) => {\r\n      setUsers(users);\r\n    });\r\n  }, []);\r\n\r\n  const sendMessage = () => {\r\n    if (message) {\r\n      socket.emit(\"sendMessage\", message, () => setMessage(\"\"));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <span>이름: {name}</span>\r\n      <p>채팅방: {room}</p>\r\n      <ul>\r\n        {users.map((user, index) => (\r\n          <li key={index}>{user.name}</li>\r\n        ))}\r\n      </ul>\r\n      <div>\r\n        <ul>\r\n          {messages.map((message, index) => (\r\n            <li key={index}>{message}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        value={message}\r\n        onClick={(e) => setMessage(e.target.value)}\r\n      />\r\n      <button type=\"button\" onClick={sendMessage}>\r\n        전송\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"wPAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,GAAE,KAAM,kBAAkB,CAAC,6IAElC,GAAMC,SAAQ,CAAG,uBAAuB,CAExC,GAAMC,OAAM,CAAGF,EAAE,CAACC,QAAQ,CAAC,CAE3B,GAAME,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,cAAwBN,QAAQ,CAAC,EAAE,CAAC,wCAA7BO,IAAI,eAAEC,OAAO,eACpB,eAAwBR,QAAQ,CAAC,EAAE,CAAC,yCAA7BS,IAAI,eAAEC,OAAO,eACpB,eAA0BV,QAAQ,CAAC,EAAE,CAAC,yCAA/BW,KAAK,eAAEC,QAAQ,eACtB,eAA8BZ,QAAQ,CAAC,EAAE,CAAC,yCAAnCa,OAAO,eAAEC,UAAU,eAC1B,eAAgCd,QAAQ,CAAC,EAAE,CAAC,0CAArCe,QAAQ,gBAAEC,WAAW,gBAC5B,GAAMC,SAAQ,CAAGf,WAAW,EAAE,CAE9BD,SAAS,CAAC,UAAM,CACd,oBAAuBgB,QAAQ,CAACC,KAAK,CAA7BX,IAAI,iBAAJA,IAAI,CAAEE,IAAI,iBAAJA,IAAI,CAElBC,OAAO,CAACD,IAAI,CAAC,CACbD,OAAO,CAACD,IAAI,CAAC,CAEbF,MAAM,CAACc,IAAI,CAAC,MAAM,CAAE,CAAEZ,IAAI,CAAJA,IAAI,CAAEE,IAAI,CAAJA,IAAK,CAAC,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CAENR,SAAS,CAAC,UAAM,CACdI,MAAM,CAACe,EAAE,CAAC,SAAS,CAAE,SAACP,OAAO,CAAK,CAChCG,WAAW,CAAC,SAACK,IAAI,qCAASA,IAAI,GAAER,OAAO,IAAC,CAAC,CAC3C,CAAC,CAAC,CAEFR,MAAM,CAACe,EAAE,CAAC,UAAU,CAAE,cAAe,IAAZT,MAAK,MAALA,KAAK,CAC5BC,QAAQ,CAACD,KAAK,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMW,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxB,GAAIT,OAAO,CAAE,CACXR,MAAM,CAACc,IAAI,CAAC,aAAa,CAAEN,OAAO,CAAE,iBAAMC,WAAU,CAAC,EAAE,CAAC,GAAC,CAC3D,CACF,CAAC,CAED,mBACE,wCACE,wBAAM,gBAAI,CAACP,IAAI,GAAQ,cACvB,qBAAG,sBAAK,CAACE,IAAI,GAAK,cAClB,oBACGE,KAAK,CAACY,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,qBACrB,oBAAiBD,IAAI,CAACjB,IAAI,EAAjBkB,KAAK,CAAkB,EACjC,CAAC,EACC,cACL,kCACE,oBACGV,QAAQ,CAACQ,GAAG,CAAC,SAACV,OAAO,CAAEY,KAAK,qBAC3B,oBAAiBZ,OAAO,EAAfY,KAAK,CAAgB,EAC/B,CAAC,EACC,EACD,cACN,cACE,IAAI,CAAC,MAAM,CACX,KAAK,CAAEZ,OAAQ,CACf,OAAO,CAAE,iBAACa,CAAC,QAAKZ,WAAU,CAACY,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAC3C,cACF,eAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAEN,WAAY,UAAC,cAE5C,EAAS,GACR,CAEP,CAAC,CAED,cAAehB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}